<!-- inside app/views/home/index.html.erb -->
<% if user_signed_in? %>
  <main class="container">
  <div class="row g-5">
    <div class="col-md-8">
      <h3 class="pb-4 mt-4 fst-italic border-bottom">
        <%= link_to "New Article", new_article_path%>
      </h3>
    </div>

    <div class="col-md-8">
      <h3 class="pb-4 mb-4 fst-italic border-bottom">
        Your Articles
      </h3>
    </div>
    <!-- Users articles -->
    <div class="row mb-2">
      <% @current_user_articles.each_with_index do |article, index| %>
        <div class="col-md-6">
          <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
            <div class="col p-4 d-flex flex-column position-static">
              <strong>
                <%= link_to "Edit", edit_article_path(article), class: "d-inline-block mb-2 text-primary text-decoration-none"%>
                <%= link_to "Destroy", article_path(article), data: {
                      turbo_method: :delete,
                      turbo_confirm: "Are you sure?"
                    },  class: "text-decoration-none text-danger" %>
              </strong>
              <h3 class="mb-0"><%= article.title %></h3>
              <div class="mb-1 text-muted"><%= article.created_at.strftime("%d/%m/%Y %H:%M") %></div>
              <p class="card-text mb-auto"><%= article.body.truncate(200) %></p>
              <%= link_to "Continue reading", article, class: "stretched-link"%>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="col-md-8">
      <h3 class="pb-4 mb-4 mt-4 fst-italic border-bottom">
        Public Articles
      </h3>
    </div>
    <!-- All Users Public Articles -->
    <div class="row mb-2">
      <% @public_articles.each_with_index do |article, index| %>
        <div class="col-md-6">
          <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
            <div class="col p-4 d-flex flex-column position-static">
              <% if @current_user == article.user_id %>
                <strong>
                  <%= link_to "Edit", edit_article_path(article), class: "d-inline-block mb-2 text-primary text-decoration-none"%>
                  <%= link_to "Destroy", article_path(article), data: {
                        turbo_method: :delete,
                        turbo_confirm: "Are you sure?"
                      },  class: "text-decoration-none text-danger" %>
                </strong>
              <% end %>
              <h3 class="mb-0"><%= article.title %></h3>
              <div class="mb-1 text-muted"><%= article.created_at.strftime("%d/%m/%Y %H:%M") %></div>
              <p class="card-text mb-auto"><%= article.body.truncate(200) %></p>
              <%= link_to "Continue reading", article, class: "stretched-link"%>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </main>
<% else %>
  <%= button_to "Sign in", new_user_session_path, class: "btn btn-warning" %> 
<% end %>